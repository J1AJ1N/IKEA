<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IKEA Buy Back Stakeholder Map</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Custom smooth transition */
        .node-transition {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        /* Fade in animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }
        /* Hide scrollbar for cleaner look */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body class="bg-slate-50 font-sans text-slate-800 antialiased h-screen overflow-hidden">

    <div class="h-full flex flex-col md:flex-row">
        
        <div class="w-full md:w-3/5 h-[55vh] md:h-full py-6 px-4 md:p-8 flex flex-col items-center justify-between overflow-y-auto no-scrollbar border-b md:border-b-0 md:border-r border-slate-200 bg-white relative">
            
            <div class="z-30 text-center flex-shrink-0 bg-white/90 backdrop-blur-sm px-6 py-2 rounded-2xl">
                <h1 class="text-xl md:text-2xl font-bold text-slate-800 mb-1">IKEA Buy Back Project</h1>
                <p class="text-slate-500 text-xs md:text-sm">Stakeholder Map</p>
            </div>
            
            <div class="relative w-[90%] md:w-[85%] max-w-[600px] aspect-square flex-shrink-0 my-6" id="map-container">
                
                <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                    <div class="absolute w-16 h-16 md:w-20 md:h-20 bg-yellow-400 rounded-full flex items-center justify-center shadow-lg border-4 border-white z-0">
                        <span class="font-black text-blue-900 text-base md:text-lg tracking-tighter">IKEA</span>
                    </div>
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-dashed border-blue-200" style="width: 36%; height: 36%;"></div>
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-dashed border-purple-200" style="width: 56%; height: 56%;"></div>
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-dashed border-orange-200" style="width: 76%; height: 76%;"></div>
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-dashed border-teal-200" style="width: 96%; height: 96%;"></div>
                </div>

                <div id="nodes-layer" class="absolute inset-0"></div>
            </div>

            <div class="z-30 flex flex-wrap justify-center gap-3 md:gap-4 text-xs text-slate-600 bg-white/90 backdrop-blur-sm px-5 py-2.5 rounded-full shadow-sm border border-slate-100 flex-shrink-0">
                <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-blue-500 mr-2 shadow-sm"></span>Core Level</div>
                <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-purple-500 mr-2 shadow-sm"></span>Economy/Enterprise</div>
                <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-orange-500 mr-2 shadow-sm"></span>Infrastructure</div>
                <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-teal-500 mr-2 shadow-sm"></span>Ecology/Future</div>
            </div>
        </div>

        <div class="w-full md:w-2/5 h-[45vh] md:h-full bg-slate-50 p-6 md:p-8 overflow-y-auto no-scrollbar shadow-inner" id="detail-panel">
            </div>

    </div>

    <script>
        // 1. Data Preparation
        const STAKEHOLDERS = [
            // Ring 1: Core
            {
                id: 'ikea', name: 'IKEA Corporate System', shortName: 'IKEA Corp', category: 'Core Stakeholder',
                color: 'bg-blue-500', ring: 1, angle: -45, icon: 'building-2',
                benefit: ['Increase corporate revenue', 'Improve ESG (Environmental, Social, and Governance) score', 'Enhance eco-friendly brand image', 'Increase customer loyalty', 'Create new revenue stream from second-hand sales'],
                risk: ['Accusations of "Greenwashing"', 'Actual production volume might not decrease', 'Prioritizing profit over genuine resource reduction'],
                ethics: ['Conflict between profit and sustainability', 'Weak circularity']
            },
            {
                id: 'part_consumer', name: 'Participating Consumers', shortName: 'Participants', category: 'Core Stakeholder',
                color: 'bg-blue-400', ring: 1, angle: 45, icon: 'users',
                benefit: ['Receive IKEA vouchers', 'Lower furniture disposal costs', 'Engage in eco-friendly behavior', 'Gain identity as a "green consumer"'],
                risk: ['Must transport furniture to IKEA themselves', 'Furniture must be fully assembled', 'Transportation costs borne by consumers', 'Vouchers restrict consumption freedom', 'Incentivizes further purchase of new furniture'],
                ethics: ['Burden shifting (environmental responsibility shifted to consumers)', 'Rebound effect']
            },
            {
                id: 'second_buyer', name: 'Second-hand Furniture Buyers', shortName: '2nd-hand Buyers', category: 'Core Stakeholder',
                color: 'bg-blue-300', ring: 1, angle: 135, icon: 'shopping-bag',
                benefit: ['Access to lower-priced furniture', 'Improve furniture accessibility', 'Participate in circular economy'],
                risk: ['Uncertain product quality', 'Limited warranty', 'Shorter product lifespan'],
                ethics: ['Unequal consumer protection']
            },
            {
                id: 'non_part_consumer', name: 'Non-participating Consumers', shortName: 'Non-participants', category: 'Core Stakeholder',
                color: 'bg-rose-500', highlight: true, ring: 1, angle: 225, icon: 'user-x',
                desc: 'Includes: Low-income, carless, rural, and mobility-impaired demographics',
                benefit: ['Almost no direct benefits'],
                risk: ['Excluded from the circular economy system', 'Must bear furniture disposal costs themselves'],
                ethics: ['Recognition justice issues', 'Circular system excludes vulnerable groups', '⚠️ Key grading point']
            },
            // Ring 2: Economy & Enterprise
            {
                id: 'worker', name: 'IKEA Retail Workers', shortName: 'Retail Workers', category: 'Economy / Enterprise',
                color: 'bg-purple-500', ring: 2, angle: -105, icon: 'briefcase',
                benefit: ['Create new jobs', 'Provide new skill opportunities'],
                risk: ['Increased workload', 'Potentially no extra compensation'],
                ethics: ['Labor fairness issues']
            },
            {
                id: 'supply', name: 'Furniture Supply Chain', shortName: 'Supply Chain', category: 'Economy / Enterprise',
                color: 'bg-purple-500', ring: 2, angle: 15, icon: 'factory',
                desc: 'Includes: Manufacturers, suppliers, raw material providers',
                benefit: ['Continuous economic revenue'],
                risk: ['Buy Back does not reduce production demand', 'Resource extraction continues'],
                ethics: ['No genuine reduction in resource extraction', 'Weak circularity']
            },
            {
                id: 'global_south', name: 'Global South Resource Communities', shortName: 'Global South', category: 'Economy / Enterprise',
                color: 'bg-purple-500', ring: 2, angle: 165, icon: 'globe-2',
                desc: 'e.g., Timber harvesting areas, resource extraction regions in developing countries',
                benefit: ['Almost no direct benefits'],
                risk: ['Environmental destruction', 'Continuous resource extraction', 'Communities bear environmental costs'],
                ethics: ['Environmental justice issues', 'Global resource inequality']
            },
            // Ring 3: Infrastructure
            {
                id: 'waste', name: 'Waste Management System', shortName: 'Waste Mgmt', category: 'Infrastructure',
                color: 'bg-orange-500', ring: 3, angle: 90, icon: 'trash-2',
                desc: 'Includes: Landfills, recycling systems',
                benefit: ['Potential reduction in discarded furniture'],
                risk: ['IKEA transfers part of the responsibility to public systems'],
                ethics: ['Externalization of responsibility']
            },
            {
                id: 'logistics', name: 'Logistics & Transportation', shortName: 'Logistics', category: 'Infrastructure',
                color: 'bg-orange-500', ring: 3, angle: 285, icon: 'truck',
                desc: 'Includes: Transport and delivery systems',
                benefit: ['No obvious direct benefits'],
                risk: ['Increased transport carbon emissions', 'Increased environmental burden'],
                ethics: ['Transfer of carbon emission responsibility']
            },
            // Ring 4: Ecology & Future
            {
                id: 'nature', name: 'Natural Environment', shortName: 'Environment', category: 'Ecology',
                color: 'bg-teal-500', ring: 4, angle: 195, icon: 'leaf',
                desc: 'Includes: Forests, biodiversity, ecosystems',
                benefit: ['Potential reduction in waste'],
                risk: ['Raw material extraction continues', 'Total production volume unreduced'],
                ethics: ['No genuine reduction in environmental impact']
            },
            {
                id: 'future', name: 'Future Generations', shortName: 'Future Gens', category: 'Future Stakeholders',
                color: 'bg-cyan-500', ring: 4, angle: -15, icon: 'baby',
                benefit: ['Potential reduction in waste'],
                risk: ['Continuous resource consumption', 'Long-term environmental damage'],
                ethics: ['Intergenerational injustice']
            }
        ];

        // 2. Layout Math
        const RING_RADII = { 1: 18, 2: 28, 3: 38, 4: 48 };

        function getPosition(ring, angleDegrees) {
            const radius = RING_RADII[ring];
            // Adjust angle so -90 degrees is top center
            const angleRad = (angleDegrees - 90) * (Math.PI / 180); 
            const x = 50 + radius * Math.cos(angleRad);
            const y = 50 + radius * Math.sin(angleRad);
            return { left: `${x}%`, top: `${y}%` };
        }

        // 3. Core Logic
        let activeId = 'non_part_consumer'; // Default selection 

        function initMap() {
            const nodesLayer = document.getElementById('nodes-layer');
            nodesLayer.innerHTML = '';

            STAKEHOLDERS.forEach(node => {
                const pos = getPosition(node.ring, node.angle);
                const isSelected = activeId === node.id;
                
                // Construct Node HTML
                const nodeEl = document.createElement('div');
                nodeEl.className = 'absolute flex flex-col items-center justify-center transform -translate-x-1/2 -translate-y-1/2 group cursor-pointer z-20';
                nodeEl.style.left = pos.left;
                nodeEl.style.top = pos.top;
                nodeEl.onclick = () => selectNode(node.id);

                let circleClasses = `relative w-[56px] h-[56px] md:w-[68px] md:h-[68px] rounded-full flex flex-col items-center justify-center shadow-md node-transition ${node.color} text-white px-1 `;
                
                if (isSelected) {
                    circleClasses += 'ring-4 ring-offset-2 ring-slate-400 scale-110 shadow-xl z-30';
                } else {
                    circleClasses += 'hover:scale-110 hover:z-30';
                    if (node.highlight) circleClasses += ' animate-pulse ring-4 ring-rose-200';
                }

                nodeEl.innerHTML = `
                    <div class="${circleClasses}">
                        <i data-lucide="${node.icon}" class="${isSelected ? 'w-5 h-5 md:w-6 md:h-6 mb-0.5' : 'w-4 h-4 md:w-5 md:h-5 mb-0.5'}"></i>
                        <span class="text-[9px] md:text-[10px] font-bold leading-tight text-center tracking-tight" style="line-height: 1.1;">${node.shortName}</span>
                    </div>
                `;
                
                nodesLayer.appendChild(nodeEl);
            });

            lucide.createIcons();
        }

        function renderDetailPanel() {
            const panel = document.getElementById('detail-panel');
            const data = STAKEHOLDERS.find(s => s.id === activeId);

            if (!data) return;

            const generateList = (items, iconColorClass) => {
                return items.map(item => `
                    <li class="flex items-start text-sm md:text-base text-slate-600 mb-2">
                        <span class="${iconColorClass} mr-2 mt-0.5 font-bold">•</span>
                        <span>${item}</span>
                    </li>
                `).join('');
            };

            const htmlContent = `
                <div class="space-y-6 animate-fade-in pb-10">
                    <div class="border-b border-slate-200 pb-4">
                        <span class="inline-block px-3 py-1 rounded-full text-xs font-semibold text-white mb-3 shadow-sm ${data.color}">
                            ${data.category}
                        </span>
                        <h2 class="text-2xl md:text-3xl font-bold text-slate-800 flex items-center">
                            <div class="p-2 rounded-lg bg-white shadow-sm border border-slate-100 mr-3">
                                <i data-lucide="${data.icon}" class="text-slate-700 w-8 h-8"></i>
                            </div>
                            ${data.name}
                        </h2>
                        ${data.desc ? `<p class="text-slate-500 mt-3 text-sm bg-slate-100 p-3 rounded-lg border border-slate-200">${data.desc}</p>` : ''}
                    </div>

                    <div class="space-y-4">
                        <div class="bg-white p-5 md:p-6 rounded-xl border-l-4 border-l-green-500 shadow-sm hover:shadow-md transition-shadow">
                            <div class="flex items-center text-green-700 font-bold mb-4 text-lg">
                                <i data-lucide="plus-circle" class="mr-2 w-5 h-5"></i> Benefit
                            </div>
                            <ul>${generateList(data.benefit, 'text-green-500')}</ul>
                        </div>

                        <div class="bg-white p-5 md:p-6 rounded-xl border-l-4 border-l-rose-500 shadow-sm hover:shadow-md transition-shadow">
                            <div class="flex items-center text-rose-600 font-bold mb-4 text-lg">
                                <i data-lucide="alert-triangle" class="mr-2 w-5 h-5"></i> Risk / Harm
                            </div>
                            <ul>${generateList(data.risk, 'text-rose-400')}</ul>
                        </div>

                        <div class="bg-white p-5 md:p-6 rounded-xl border-l-4 border-l-purple-500 shadow-sm hover:shadow-md transition-shadow">
                            <div class="flex items-center text-purple-700 font-bold mb-4 text-lg">
                                <i data-lucide="scale" class="mr-2 w-5 h-5"></i> Ethical Issue
                            </div>
                            <ul>${generateList(data.ethics, 'text-purple-500')}</ul>
                        </div>
                    </div>
                </div>
            `;

            panel.innerHTML = htmlContent;
            lucide.createIcons();
        }

        function selectNode(id) {
            activeId = id;
            initMap(); 
            renderDetailPanel(); 
            
            // Smooth scroll for mobile views
            if(window.innerWidth < 768) {
                document.getElementById('detail-panel').scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            initMap();
            renderDetailPanel();
        });

    </script>
</body>
</html>
